# this is file is generated by puppet

# template for icvpn route exchange via bgp
template bgp icvpn {
  table mesh;
  local as <%= @icvpn_as %>;
  source address <%= @icvpn_ipv6_address %>;
  import filter {
    if is_default() then accept;
    if is_ula() || is_freifunk() then accept;
  };
  export filter {
    if is_in_<%= @mesh_code %>_prefix() then accept;
    if ((source = RTS_BGP || source = RTS_STATIC_DEVICE || source = RTS_STATIC) && (is_freifunk()<% if @include_chaos == "yes" %> || is_chaos()<% end %><% if @include_dn42 == "yes" %> || is_dn42()<% end %>)) then accept;
    reject;
  };
};
